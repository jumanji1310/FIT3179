{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "config": {
        "font": "Tahoma"
    },
    "width": "container",
    "height": "container",
    "data": {
        "url": "https://raw.githubusercontent.com/jumanji1310/FIT3179/main/data/freedom_score.csv"
    },
    "params": [
        {
            "name": "score_selection",
            "value": "highest",
            "bind": {
                "input": "radio",
                "options": [
                    "highest",
                    "lowest"
                ],
                "labels": [
                    "Highest",
                    "Lowest"
                ],
                "name": "Show highest/lowest scores: "
            }
        }
    ],
    "transform": [
        {
            "calculate": "split(datum.Country, ' ')",
            "as": "SplitCountry"
        },
        {
            "filter": "if(score_selection == 'highest', datum.Total > 50, datum.Total < 50)"
        }
    ],
    "layer": [
        {
            "encoding": {
                "x": {
                    "field": "SplitCountry",
                    "title": "Country",
                    "type": "nominal",
                    "axis": {
                        "labelAngle": 0,
                        "labelFontSize": 12,
                        "titleFontSize": 18
                    },
                    "sort": [
                        "Iceland",
                        "Estonia",
                        "Canada",
                        "Costa Rica",
                        "Taiwan",
                        "Germany",
                        "France",
                        "United Kingdom",
                        "Georgia",
                        "Italy",
                        "Japan",
                        "Australia",
                        "United States",
                        "South Africa",
                        "Serbia",
                        "Belarus",
                        "Bahrain",
                        "Russia",
                        "Uzbekistan",
                        "Venezuela",
                        "Ethiopia",
                        "United Arab Emirates",
                        "Egypt",
                        "Pakistan",
                        "Saudi Arabia",
                        "Vietnam",
                        "Cuba",
                        "Myanmar",
                        "Iran",
                        "China"
                    ]
                },
                "y": {
                    "title": "Score",
                    "axis": {
                        "labelAngle": 0,
                        "labelFontSize": 15,
                        "titleFontSize": 18
                    }
                },
                "color": {
                    "type": "nominal",
                    "scale": {
                        "domain": [
                            "Obstacles to Access",
                            "Limits on Content",
                            "Violations of User Rights"
                        ],
                        "range": [
                            "blue",
                            "red",
                            "purple"
                        ]
                    },
                    "legend": {
                        "title": "Category",
                        "titleFontSize": 15,
                        "labelFontSize": 12,
                        "labelLimit": 200
                    }
                }
            },
            "layer": [
                {
                    "mark": {
                        "type": "bar",
                        "xOffset": -10,
                        "size": 10
                    },
                    "encoding": {
                        "y": {
                            "field": "Obstacles to Access",
                            "type": "quantitative"
                        },
                        "color": {
                            "datum": "Obstacles to Access"
                        },
                        "tooltip": [
                            {
                                "field": "Country",
                                "type": "nominal",
                                "title": "Country"
                            },
                            {
                                "field": "Cat1",
                                "type": "nominal",
                                "title": "Category"
                            },
                            {
                                "field": "Obstacles to Access",
                                "type": "quantitative",
                                "title": "Score for category"
                            },
                            {
                                "field": "Total",
                                "type": "quantitative",
                                "title": "Total Score"
                            }
                        ]
                    }
                },
                {
                    "mark": {
                        "type": "bar",
                        "xOffset": 0,
                        "size": 10
                    },
                    "encoding": {
                        "y": {
                            "field": "Limits on Content",
                            "type": "quantitative"
                        },
                        "color": {
                            "datum": "Limits on Content"
                        },
                        "tooltip": [
                            {
                                "field": "Country",
                                "type": "nominal",
                                "title": "Country"
                            },
                            {
                                "field": "Cat2",
                                "type": "nominal",
                                "title": "Category"
                            },
                            {
                                "field": "Limits on Content",
                                "type": "quantitative",
                                "title": "Score for category"
                            },
                            {
                                "field": "Total",
                                "type": "quantitative",
                                "title": "Total Score"
                            }
                        ]
                    }
                },
                {
                    "mark": {
                        "type": "bar",
                        "xOffset": 10,
                        "size": 10
                    },
                    "encoding": {
                        "y": {
                            "field": "Violations of User Rights",
                            "type": "quantitative"
                        },
                        "color": {
                            "datum": "Violations of User Rights"
                        },
                        "tooltip": [
                            {
                                "field": "Country",
                                "type": "nominal",
                                "title": "Country"
                            },
                            {
                                "field": "Cat3",
                                "type": "nominal",
                                "title": "Category"
                            },
                            {
                                "field": "Violations of User Rights",
                                "type": "quantitative",
                                "title": "Score for category"
                            },
                            {
                                "field": "Total",
                                "type": "quantitative",
                                "title": "Total Score"
                            }
                        ]
                    }
                }
            ]
        }
    ]
}